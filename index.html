<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="./style.css">
    <title>FlexBox Image Viewer</title>
</head>

<body>
    <div id="content">
        <div class="item-card-container">
            <div class="item-card first-item-card current-item-card">
                <img src="./images/square.jpg">
            </div>
            <div class="item-card">
                <img src="./images/square2.jpg">
            </div>
            <div class="item-card">
                <img src="./images/square3.jpg">
            </div>
            <div class="item-card">
                <img src="./images/square4.jpg">
            </div>
            <div class="item-card">
                <img src="./images/square5.jpg">
            </div>
        </div>
    </div>
</body>
<script>
    var container = document.querySelector(".item-card-container");
    slides = container.querySelectorAll(".item-card");
    slideIndex = 0;

    container.addEventListener("touchstart", startTouch, false);
    container.addEventListener("touchmove", moveTouch, false);

    var initialX = null;
    var initialY = null;

    function startTouch(e) {
        initialX = e.touches[0].clientX;
        initialY = e.touches[0].clientY;
    };

    function moveTouch(e) {
        if (initialX === null) {
            return;
        }

        if (initialY === null) {
            return;
        }

        var currentX = e.touches[0].clientX;
        var currentY = e.touches[0].clientY;

        var diffX = initialX - currentX;
        var diffY = initialY - currentY;

        if (Math.abs(diffX) > Math.abs(diffY)) {
            // sliding horizontally
            if (diffX > 0) {
                changeSlide(1);
                // swiped left
                console.log("swiped left");
            } else {
                changeSlide(-1);
                // swiped right
                console.log("swiped right");
            }
        }

        initialX = null;
        initialY = null;

        e.preventDefault();
    };
    

    function changeSlide(a) {        
        slides[slideIndex].classList.remove("current-item-card");
        slideIndex += a;
        if (slideIndex > slides.length - 1) slideIndex = 0;
        else if (slideIndex < 0) slideIndex = slides.length - 1;
        slides[slideIndex].classList.add("current-item-card");
    }
</script>

</html>